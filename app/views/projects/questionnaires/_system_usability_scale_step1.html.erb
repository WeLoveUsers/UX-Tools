<div class="ui container <%= "navigable-tabs" if @project.ask_open_ended_questions || @project.ask_respondent_qualification %>">

  <div class="ui segment">
    <% if @project.ask_open_ended_questions || @project.ask_respondent_qualification %>
        <div class="ui top right attached small step-counter label">Étape <span class="current-step"></span>/<span class="total-steps"></span></div>
    <% end %>
    <h2><%= t('.title') + ' "' + @project.product_name + '"' %></h2>
    <%= form_for(response, :html => {:class => "ui form sus"}) do |f| %>
    <%
      #
      # Quick fix to avoid unexpected changes for already running studies
      #
      sus_product_type = @project.sus_product_type[I18n.locale]
      if @project.created_at < @app_updates[:sus_dynamic_instructions_installed_at]
        sus_product_type = @project.sus_default_product_type[I18n.locale]
      end
    %>
    <div class="ui active huge-radio tab" data-tab="main-form">
  		<table class="ui selectable very basic large table">
  		  <tbody>
          <tr class="header">
  		      <td>&nbsp;</td>
  		      <td class="right aligned"><%= t('.likert_disagree') %></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><%= t('.likert_agree') %></td>
          </tr>
  		    <tr class="field">
  		      <td><%= ResponseSu::Q1_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q1]" value="0"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q1]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q1]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q1]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q1]" value="4"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q2_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q2]" value="4"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q2]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q2]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q2]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q2]" value="0"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q3_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q3]" value="0"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q3]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q3]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q3]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q3]" value="4"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q4_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q4]" value="4"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q4]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q4]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q4]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q4]" value="0"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q5_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q5]" value="0"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q5]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q5]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q5]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q5]" value="4"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q6_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q6]" value="4"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q6]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q6]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q6]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q6]" value="0"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q7_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q7]" value="0"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q7]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q7]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q7]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q7]" value="4"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q8_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q8]" value="4"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q8]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q8]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q8]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q8]" value="0"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q9_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q9]" value="0"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q9]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q9]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q9]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q9]" value="4"><label></label></div>
            </td>
  		    </tr>
          <tr class="field">
  		      <td><%= ResponseSu::Q10_label[I18n.locale].sub('@product_type', sus_product_type) %></td>
            <td nowrap class="middle aligned right aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q10]" value="4"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q10]" value="3"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q10]" value="2"><label></label></div>
            </td>
            <td nowrap class="middle aligned center aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q10]" value="1"><label></label></div>
            </td>
            <td nowrap class="middle aligned left aligned">
              <div class="ui fitted radio checkbox"><input type="radio" name="response_su[Q10]" value="0"><label></label></div>
            </td>
  		    </tr>
        </tbody>
      </table>

      <div class="ui right aligned container">
        <% if @project.ask_open_ended_questions %>
        <div class="ui large button to-open-ended-questions">Suivant</div>
        <% elsif @project.ask_respondent_qualification %>
        <div class="ui large button to-respondent-qualification">Suivant</div>
        <% else %>
        <%= f.submit t(".submit"), :class => "ui large submit button" %>
        <% end %>
      </div>

    </div>

    <% if @project.ask_open_ended_questions %>
    <div class="ui open-ended-questions tab" data-tab="open-ended-questions">
      <div class="ui container">
        <div class="ui stacked grid">

          <% if @project.ask_user_summary %>
          <div class="row">
            <div class="four wide column"></div>
            <div class="eight wide column">
              <div class="field">
                <label>De manière générale, que pensez-vous de "<%= @project.product_name %>" ?</label>
                <%= f.text_area :summary %>
              </div>
            </div>
          </div>
          <% end %>

          <% if @project.ask_user_ideas %>
          <div class="row">
            <div class="four wide column"></div>
            <div class="eight wide column">
              <div class="field">
                <label>Avez-vous des idées à suggérer ?</label>
                <%= f.text_area :ideas %>
              </div>
            </div>
          </div>
          <% end %>

        </div>
      </div>

      <div class="ui right aligned container">
        <div class="ui inverted button to-main-form">Précédent</div>
        <% if @project.ask_respondent_qualification %>
        <div class="ui large button to-respondent-qualification">Suivant</div>
        <% else %>
        <%= f.submit t(".submit"), :class => "ui large submit button" %>
        <% end %>
      </div>
    </div>
    <% end %>

    <% if @project.ask_respondent_qualification %>
    <div class="ui respondent-qualification tab" data-tab="respondent-qualification">
      <div class="ui container">
        <div class="ui stacked grid">

          <% if @project.ask_user_age %>
          <div class="row">
            <div class="five wide column"></div>
            <div class="three wide column">
              <div class="field required">
                <label for="response_su_age">Âge</label>
                <div class="ui right labeled input">
                  <%= f.number_field :age, in: 1..99, step: 1, :class => "no-spinner", :value => nil%>
                  <div class="ui basic label">
                    ans
                  </div>
                </div>
              </div>
            </div>
          </div>
          <% end %>

          <% if @project.ask_user_gender %>
          <div class="row">
            <div class="five wide column"></div>
            <div class="three wide column">
              <div class="grouped fields required">
                <label>Sexe</label>
                <div class="field">
                  <div class="ui radio checkbox">
                    <%= f.radio_button :gender, "1"%>
                    <label>Femme</label>
                  </div>
                </div>
                <div class="field">
                  <div class="ui radio checkbox">
                    <%= f.radio_button :gender, "2"%>
                    <label>Homme</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <% end %>

          <% if @project.ask_user_occupation %>
          <div class="row">
            <div class="five wide column"></div>
            <div class="six wide column">
              <div class="field required">
                <label>Métier (ou occupation)</label>
                <%= f.text_field :occupation %>
              </div>
            </div>
          </div>
          <% end %>

          <% if @project.ask_user_first_use_date %>
          <div class="row">
            <div class="five wide column"></div>
            <div class="six wide column">
              <div class="field required">
                <label>Depuis quand utilisez-vous "<%= @project.product_name %>" ?</label>
                <div class="ui date month calendar">
                  <div class="ui left icon action input">
                    <i class="calendar icon"></i>
                    <input type="text" placeholder="Date" value="<%= response.first_use_on %>">
                    <div class="ui icon clear-date basic button">
                      <i class="close icon"></i>
                    </div>
                  </div>
                </div>
                <%= f.hidden_field :first_use_on %>
              </div>
            </div>
          </div>
          <% end %>

          <% if @project.ask_user_usage_frequency %>
          <div class="row">
            <div class="five wide column"></div>
            <div class="six wide column">
              <div class="field required">
                <label>En moyenne, combien de fois par mois utilisez-vous "<%= @project.product_name %>" ?</label>
                <%= f.text_field :usage_frequency_per_month %>
              </div>
            </div>
          </div>
          <% end %>

          <% if @project.ask_user_group %>
          <div class="row">
            <div class="five wide column"></div>
            <div class="six wide column">
              <div class="required field">
                <label>Groupe (ou type d'utilisateur)</label>
                <%= f.text_field :group %>
              </div>
            </div>
          </div>
          <% end %>

        </div>
      </div>

      <div class="ui right aligned container">
        <% if @project.ask_open_ended_questions %>
        <div class="ui inverted button to-open-ended-questions">Précédent</div>
        <% else %>
        <div class="ui inverted button to-main-form">Précédent</div>
        <% end %>
        <%= f.submit t(".submit"), :class => "ui large submit button" %>
      </div>
    </div>
    <% end %>

    <input type="hidden" name="uri_token" value="<%= @project.uri_token %>">
    <input type="hidden" name="response_su[f]" value="">
    <% end %>
  </div>
</div>
